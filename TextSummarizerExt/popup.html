<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Text Summarizer</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-white text-gray-800 font-sans" style="width: 300px; height: 400px; overflow: hidden;">

  <div class="flex flex-col h-full">
    <div class="bg-indigo-600 text-white p-4 text-center font-bold text-lg">Text Summarizer</div>

    <div class="flex justify-around bg-gray-100 border-b">
      <button id="tab-summary" class="tab-btn px-4 py-2 hover:bg-gray-200 font-medium">Summary</button>
      <button id="tab-related" class="tab-btn px-4 py-2 hover:bg-gray-200 font-medium">Related</button>
      <button id="tab-definitions" class="tab-btn px-4 py-2 hover:bg-gray-200 font-medium">Definitions</button>
      <button id="tab-settings" class="tab-btn px-2 py-2 text-xs text-gray-500">⚙</button>
    </div>

    <div id="panel-summary" class="tab-panel flex-1 p-4 overflow-y-auto hidden">
      <label class="block text-sm mb-1 font-medium">Summary Length Limit (words):</label>
      <input id="summary-limit" type="number" class="w-full p-2 border rounded mb-3" placeholder="e.g., 100" />

      <label class="block text-sm mb-1 font-medium">Additional Instructions:</label>
      <input id="additional-prompts" type="text" class="w-full p-2 border rounded mb-3" placeholder="e.g., emphasize on ..." />

      <button id="fetch-btn" class="mb-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
        Fetch Summary
      </button>

      <div id="loading" class="hidden text-sm text-indigo-600 flex items-center space-x-2 mb-3 transition-opacity duration-300">
        <svg class="animate-spin h-5 w-5 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none"
          viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor"
            d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 100 16v-4l-3 3 3 3v-4a8 8 0 01-8-8z">
          </path>
        </svg>
        <span>Fetching summary...</span>
      </div>
      
      <div id="summary-content" class="text-sm whitespace-pre-wrap leading-relaxed bg-gray-50 p-3 rounded border"></div>
      <div id="tts-controls" class="hidden mt-2 flex gap-2">
        <button id="tts-toggle" class="p-1 px-3 border rounded bg-gray-100 hover:bg-gray-200 text-sm">▶️ Play Summary</button>
        <button id="tts-stop" class="p-1 px-3 border rounded bg-gray-100 hover:bg-gray-200 text-sm">⏹️ Stop</button>
      </div>
    </div>

    <div id="panel-related" class="tab-panel flex-1 p-4 overflow-y-auto hidden">
      <ul id="related-content" class="list-disc pl-5 text-sm space-y-1"></ul>
    </div>

    <div id="panel-definitions" class="tab-panel flex-1 p-4 overflow-y-auto hidden">
      <div id="definitions-content" class="space-y-2 text-sm"></div>
    </div>

    <div id="panel-settings" class="tab-panel flex-1 p-4 overflow-y-auto hidden">
      <label for="apiKeyOpenAI" class="block mb-1 font-semibold">OpenAI API Key:</label>
      <input id="apiKeyOpenAI" type="password" placeholder="sk-..." class="w-full p-2 border rounded mb-2">

    <label for="apiKeyGemini" class="block mb-1 font-semibold">Gemini API Key:</label>
    <input id="apiKeyGemini" type="password" placeholder="AIza..." class="w-full p-2 border rounded mb-2">

      <button id="saveKeyBtn" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">Save Key</button>
      
      <p id="saveStatus" class="text-sm mt-2 text-green-600 hidden">Saved!</p>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
